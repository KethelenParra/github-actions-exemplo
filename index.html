<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GitHub Actions</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <div class="container">
    <h1>Deploy Autom√°tico com GitHub Actions! teste com erro!</h1>
    <p>O GitHub Actions √© uma ferramenta poderosa de automa√ß√£o para integra√ß√£o e entrega cont√≠nua (CI/CD).</p>
    <ul>
      <li><strong>üìí Versionamento:</strong> Com o Git, todo o hist√≥rico de altera√ß√µes do projeto √© salvo.</li>
      <li><strong>üõ†Ô∏è Integra√ß√£o Cont√≠nua:</strong> A cada push, testes e verifica√ß√µes autom√°ticas podem ser executadas.
      </li>
      <li><strong>üöÄ Implanta√ß√£o Cont√≠nua:</strong> As altera√ß√µes s√£o publicadas automaticamente ap√≥s o push.</li>
    </ul>
    <div id="status" style="margin-top: 20px;"></div>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        fetch("status.json")
          .then(response => response.json())
          .then(data => {
            if (data.status === "ok") {
              document.getElementById("status").innerHTML = "<span class='estrela'>‚≠ê</span> Testes passaram!";
            }
          })
          .catch(err => console.error("Erro ao carregar status.json:", err));
      });
    </script>
    <h1 class="page-title">Relat√≥rio - Projeto pr√°tico com GitHub Actions</h1>

    <h2>Objetivo do Trabalho</h2>
    <p>
      Este trabalho teve como objetivo demonstrar de forma pr√°tica o uso da ferramenta
      GitHub Actions como recurso para versionamento, integra√ß√£o cont√≠nua (CI) e
      implanta√ß√£o cont√≠nua (CD) em um projeto de c√≥digo aberto. Foi desenvolvido um mini
      projeto contendo arquivos HTML, CSS e JavaScript, integrando testes automatizados e
      deploy autom√°tico com GitHub Pages.
    </p>

    <h2>Etapas Realizadas</h2>

    <h3>1. Cria√ß√£o do Reposit√≥rio</h3>
    <p>
      O reposit√≥rio foi criado no GitHub com o nome:
      <code class="code-inline">github-actions-exemplo</code>
      Dentro dele, foram adicionados arquivos iniciais de uma p√°gina est√°tica.
    </p>

    <h3>2. Estrutura de Arquivos Criados</h3>
    <pre>
      .github/
        ‚îî‚îÄ‚îÄ workflows/
            ‚îî‚îÄ‚îÄ deploy.yml     # Arquivo de workflow do GitHub Actions
      scripts/
        ‚îî‚îÄ‚îÄ math.js            # Fun√ß√£o JS de exemplo
        ‚îî‚îÄ‚îÄ math.test.js       # Testes automatizados com Jest
      index.html               # P√°gina HTML principal
      styles.css               # Estiliza√ß√£o da p√°gina
      package.json             # Arquivo de depend√™ncias Node.js e script de teste
    </pre>

    <h2>Detalhamento dos Arquivos e Fun√ß√µes</h2>
    <h3>math.js</h3>
    <p>Fun√ß√£o JavaScript simples exportada para testes automatizados.</p>
    <pre>
      function somar(a, b) {
        return a + b;
      }
      module.exports = { somar };
    </pre>

    <h3>math.test.js</h3>
    <p>Teste automatizado com Jest para validar a fun√ß√£o. <code class="code-inline">somar()</code></p>
    <pre>
      const { somar } = require("./math");

      test("Soma de 2 + 2 deve ser 4", () => {
        expect(somar(2, 2)).toBe(4);
      });
    </pre>

    <h3>package.json</h3>
    <p>Declara as depend√™ncias do projeto, incluindo Jest.<br>
      Define o comando <code class="code-inline">npm test</code> para rodar os testes.</p>
    <pre>
      {
        "name": "github-actions-exemplo",
        "version": "1.0.0",
        "scripts": {
          "test": "jest && echo {\"status\":\"ok\"} > ./status.json"
        },
        "devDependencies": {
          "jest": "^29.0.0"
        }
      }
    </pre>

    <h2>Workflow - GitHub Actions (deploy.yml)</h2>
    <pre>
        name: Deploy para GitHub Pages

        on:
          push:
            branches: [main]

        permissions:
          contents: write
          pages: write
          id-token: write

        jobs:
          deploy:
            runs-on: ubuntu-latest
            steps:
              - name: Checkout do reposit√≥rio
                uses: actions/checkout@v3

              - name: Instalar depend√™ncias
                run: npm install

              - name: Rodar testes com Jest
                run: npm test

              - name: Criar status.json
                run: echo '{"status":"ok"}' > status.json

              - name: Deploy para GitHub Pages
                uses: peaceiris/actions-gh-pages@v3
                with:
                  github_token: ${{ secrets.GITHUB_TOKEN }}
                  publish_dir: ./
                  publish_branch: gh-pages
    </pre>
    <p>
      <strong>Observa√ß√µes:</strong><br>
      ‚Ä¢ Esse arquivo define que o workflow ser√° executado sempre que houver push na branch. <code
        class="code-inline">main</code><br>
      ‚Ä¢ Ele roda testes com Jest, e s√≥ publica o c√≥digo na branch <code class="code-inline">gh-pages</code> se os testes
      passarem.<br>
      ‚Ä¢ A branch <code class="code-inline">gh-pages</code> √© utilizada automaticamente pelo GitHub Pages para gerar o
      link de deploy.
    </p>

    <h3>O que s√£o Workflows?</h3>
    <p>
      Um workflow no GitHub Actions √© uma sequ√™ncia de etapas autom√°ticas que rodam
      ap√≥s um gatilho (<em>push</em>, <em>pull request</em>, <em>cron</em>, etc). Esses workflows s√£o definidos em
      arquivos .yml dentro da pasta: <code class="code-inline">.github/workflows</code>
    </p>
    <p>
      Neste projeto, o workflow principal √© o <code class="code-inline">deploy.yml</code>, respons√°vel por:
    </p>
    <ul>
      <li>Validar o c√≥digo</li>
      <li>Automatizar testes</li>
      <li>Fazer deploy do resultado</li>
    </ul>
    <p>
      Voc√™ pode ter m√∫ltiplos workflows para diferentes finalidades (testes, builds, deploys em
      ambientes diferentes, CI para PRs, etc).
    </p>
    <h3>Como o GitHub Actions atua no Versionamento</h3>
    <p>
      O versionamento em si √© feito pelo Git, que rastreia todas as mudan√ßas no projeto.
      Por√©m, o GitHub Actions entra como "automa√ß√£o de resposta ao versionamento".
      Toda vez que √© feito um <em>push</em> no branch <code class="code-inline">main</code>, o GitHub Actions detecta
      essa mudan√ßa
      automaticamente e dispara um workflow configurado no arquivo: <code class="code-inline">deploy.yml</code>
    </p>
    <p>
      Ou seja, o GitHub Actions "ouve" os eventos do Git (como push ou pull request) e
      executa tarefas autom√°ticas configuradas.
    </p>

    <h2>CI - Integra√ß√£o Cont√≠nua</h2>
    <p>
      CI significa garantir que todo c√≥digo enviado para o reposit√≥rio seja testado
      automaticamente. Neste projeto:
    </p>
    <ul>
      <li>
        O arquivo <code class="code-inline">deploy.yml</code> define que ao realizar um push, o GitHub Actions:
        <ol>
          <li>Faz o checkout do c√≥digo.</li>
          <li>Instala as depend√™ncias (como o Jest).</li>
          <li>Executa os testes definidos em <code class="code-inline">math.test.js</code></li>
        </ol>
      </li>
      <li>
        Se os testes passarem, o processo continua; se falharem, o processo para e o deploy n√£o √© feito.
        Isso evita que erros entrem em produ√ß√£o. √â o conceito central da CI: integrar c√≥digo
        com seguran√ßa, sempre validado.
      </li>
    </ul>

    <h2>CD - Entrega Cont√≠nua (ou Implanta√ß√£o Cont√≠nua)</h2>
    <p>
      Ap√≥s os testes serem executados com sucesso, o GitHub Actions:
    </p>
    <ol>
      <li>Cria (ou atualiza) o arquivo <code class="code-inline">status.json</code> com <code
          class="code-inline">"status": "ok"</code></li>
      <li>Usa a a√ß√£o <code class="code-inline">peaceiris/actions-gh-pages</code> para fazer deploy do conte√∫do do
        projeto
        na branch <code class="code-inline">gh-pages</code></li>
      <li>O GitHub Pages ent√£o publica automaticamente a nova vers√£o do site
        hospedado em:
        <br>
        <strong>https://kethelenparra.github.io/github-actions-exemplo/</strong>
      </li>
    </ol>
    <p>
      Esse ciclo cont√≠nuo, sem necessidade de subir manualmente, √© o CD em a√ß√£o.
    </p>
    <h3>O que o GitHub Actions est√° fazendo neste projeto?</h3>
    <table border="1" cellpadding="6" cellspacing="0">
      <thead>
        <tr>
          <th>Elemento</th>
          <th>Papel do GitHub Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Versionamento</strong></td>
          <td>Dispara workflows automaticamente ao detectar mudan√ßas (push)</td>
        </tr>
        <tr>
          <td><strong>Integra√ß√£o Cont√≠nua</strong></td>
          <td>Executa testes (Jest) automaticamente ap√≥s mudan√ßas</td>
        </tr>
        <tr>
          <td><strong>Implanta√ß√£o Cont√≠nuo (CD)</strong></td>
          <td>Publica o site na web automaticamente se os testes forem aprovados</td>
        </tr>
        <tr>
          <td><strong>Workflow.yml</strong></td>
          <td>Define, passo a passo, o que ser√° feito em cada execu√ß√£o</td>
        </tr>
        <tr>
          <td><strong>Seguran√ßa e automa√ß√£o</strong></td>
          <td>Garante que apenas c√≥digo testado seja entregue ao usu√°rio final</td>
        </tr>
      </tbody>
    </table>

    <h2>Benef√≠cios percebidos com GitHub Actions</h2>
    <ul>
      <li>Automatiza todo o processo de teste e publica√ß√£o</li>
      <li>Garante que nenhum erro seja publicado (gra√ßas aos testes automatizados)</li>
      <li>Evita tarefas manuais de deploy</li>
      <li>Demonstra na pr√°tica o ciclo completo de CI/CD mesmo em um projeto simples</li>
      <li>Fornece um feedback visual direto na p√°gina publicada</li>
    </ul>

    <h2>Conclus√£o</h2>
    <p>
      Este miniprojeto mostrou que √© poss√≠vel aplicar conceitos de DevOps, como integra√ß√£o
      cont√≠nua e entrega cont√≠nua, com uma ferramenta gratuita e poderosa como o GitHub
      Actions. Mesmo com uma aplica√ß√£o simples, foi poss√≠vel validar testes autom√°ticos e
      deploy sem interven√ß√£o manual, o que reflete boas pr√°ticas de desenvolvimento
      profissional.
    </p>
  </div>
</body>

</html>